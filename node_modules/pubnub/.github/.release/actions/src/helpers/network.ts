import * as http from '@actions/http-client'

/** Use external service 'ipinfo.io' to get real external IP address. */
export const getPublicIPAddress = async (): Promise<string | undefined> => {
  const httpClient = new http.HttpClient('deploy-http-client')
  const response = await httpClient.get('http://ipinfo.io/ip')

  return response.message.statusCode === 200 ? response.readBody() : undefined
}